{"ast":null,"code":"// utils/userUtils.js\nimport { getUsers } from '../services/userService';\n// utils/userUtils.js\nimport { fileToBase64 } from './fileUtils';\nexport const prepareUpdatedUserData = async user => {\n  const photoData = user.photoFile ? await fileToBase64(user.photoFile) : user.photoData || '';\n  return {\n    name: user.name,\n    email: user.email,\n    phone: user.phone,\n    role: user.role,\n    photoData\n  };\n};\nexport const getLoggedInUser = navigate => {\n  const loggedUser = JSON.parse(localStorage.getItem('user'));\n  if (!loggedUser) {\n    navigate('/');\n    return null;\n  }\n  return loggedUser;\n};\nexport const fetchUserFromDB = async userId => {\n  try {\n    const allUsers = await getUsers();\n    const usersWithIds = Object.entries(allUsers).map(([id, user]) => ({\n      id,\n      ...user\n    }));\n    return usersWithIds.find(u => u.id === userId);\n  } catch (error) {\n    console.error(\"❌ Error fetching user from DB:\", error);\n    return null;\n  }\n};","map":{"version":3,"names":["getUsers","fileToBase64","prepareUpdatedUserData","user","photoData","photoFile","name","email","phone","role","getLoggedInUser","navigate","loggedUser","JSON","parse","localStorage","getItem","fetchUserFromDB","userId","allUsers","usersWithIds","Object","entries","map","id","find","u","error","console"],"sources":["/Users/dorlevi/IdeaProjects/newShiftWise/client/src/utils/userUtils.js"],"sourcesContent":["// utils/userUtils.js\nimport { getUsers } from '../services/userService';\n// utils/userUtils.js\nimport { fileToBase64 } from './fileUtils';\n\nexport const prepareUpdatedUserData = async (user) => {\n    const photoData = user.photoFile\n        ? await fileToBase64(user.photoFile)\n        : user.photoData || '';\n\n    return {\n        name: user.name,\n        email: user.email,\n        phone: user.phone,\n        role: user.role,\n        photoData,\n    };\n};\n\nexport const getLoggedInUser = (navigate) => {\n    const loggedUser = JSON.parse(localStorage.getItem('user'));\n    if (!loggedUser) {\n        navigate('/');\n        return null;\n    }\n    return loggedUser;\n};\n\nexport const fetchUserFromDB = async (userId) => {\n    try {\n        const allUsers = await getUsers();\n        const usersWithIds = Object.entries(allUsers).map(([id, user]) => ({ id, ...user }));\n        return usersWithIds.find((u) => u.id === userId);\n    } catch (error) {\n        console.error(\"❌ Error fetching user from DB:\", error);\n        return null;\n    }\n};\n"],"mappings":"AAAA;AACA,SAASA,QAAQ,QAAQ,yBAAyB;AAClD;AACA,SAASC,YAAY,QAAQ,aAAa;AAE1C,OAAO,MAAMC,sBAAsB,GAAG,MAAOC,IAAI,IAAK;EAClD,MAAMC,SAAS,GAAGD,IAAI,CAACE,SAAS,GAC1B,MAAMJ,YAAY,CAACE,IAAI,CAACE,SAAS,CAAC,GAClCF,IAAI,CAACC,SAAS,IAAI,EAAE;EAE1B,OAAO;IACHE,IAAI,EAAEH,IAAI,CAACG,IAAI;IACfC,KAAK,EAAEJ,IAAI,CAACI,KAAK;IACjBC,KAAK,EAAEL,IAAI,CAACK,KAAK;IACjBC,IAAI,EAAEN,IAAI,CAACM,IAAI;IACfL;EACJ,CAAC;AACL,CAAC;AAED,OAAO,MAAMM,eAAe,GAAIC,QAAQ,IAAK;EACzC,MAAMC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EAC3D,IAAI,CAACJ,UAAU,EAAE;IACbD,QAAQ,CAAC,GAAG,CAAC;IACb,OAAO,IAAI;EACf;EACA,OAAOC,UAAU;AACrB,CAAC;AAED,OAAO,MAAMK,eAAe,GAAG,MAAOC,MAAM,IAAK;EAC7C,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMnB,QAAQ,CAAC,CAAC;IACjC,MAAMoB,YAAY,GAAGC,MAAM,CAACC,OAAO,CAACH,QAAQ,CAAC,CAACI,GAAG,CAAC,CAAC,CAACC,EAAE,EAAErB,IAAI,CAAC,MAAM;MAAEqB,EAAE;MAAE,GAAGrB;IAAK,CAAC,CAAC,CAAC;IACpF,OAAOiB,YAAY,CAACK,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACF,EAAE,KAAKN,MAAM,CAAC;EACpD,CAAC,CAAC,OAAOS,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtD,OAAO,IAAI;EACf;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}