{"ast":null,"code":"var _jsxFileName = \"/Users/dorlevi/IdeaProjects/newShiftWise/client/src/components/AvailabilityScreen.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport { getAvailabilityByUserId, saveAvailability, updateAvailability, calculateWeekDates } from '../services/availabilityService';\nimport '../styles/AvailabilityScreen.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AvailabilityScreen = () => {\n  _s();\n  var _JSON$parse, _JSON$parse$user;\n  const [availability, setAvailability] = useState({});\n  const [weekDates, setWeekDates] = useState([]);\n  const [availabilityExists, setAvailabilityExists] = useState(false); // האם זמינות קיימת\n  const navigate = useNavigate();\n  const userId = (_JSON$parse = JSON.parse(localStorage.getItem('user'))) === null || _JSON$parse === void 0 ? void 0 : (_JSON$parse$user = _JSON$parse.user) === null || _JSON$parse$user === void 0 ? void 0 : _JSON$parse$user.id; // קבלת ה-userId מה-localStorage\n\n  useEffect(() => {\n    if (!userId) {\n      navigate('/'); // אם המשתמש לא מחובר, ננווט למסך ההתחברות\n      return;\n    }\n\n    // חישוב תאריכי השבוע\n    const formattedDates = calculateWeekDates().map(date => {\n      const [year, month, day] = date.split('-');\n      return `${day}/${month}/${year}`; // שינוי לפורמט dd/mm/yyyy\n    });\n    setWeekDates(formattedDates);\n\n    // טעינת זמינות מהשרת\n    const loadAvailability = async () => {\n      try {\n        const data = await getAvailabilityByUserId(userId);\n        if (data) {\n          setAvailability(data);\n          setAvailabilityExists(true);\n        }\n      } catch (error) {\n        console.error('Error fetching availability:', error);\n      }\n    };\n    loadAvailability();\n  }, [navigate, userId]);\n  const handleAvailabilityChange = (date, shift, isAvailable) => {\n    setAvailability(prev => ({\n      ...prev,\n      [date]: {\n        ...prev[date],\n        [shift]: isAvailable\n      }\n    }));\n  };\n  const handleSave = async () => {\n    try {\n      const response = availabilityExists ? await updateAvailability(userId, {\n        weekDates,\n        availability\n      }) : await saveAvailability(userId, {\n        weekDates,\n        availability\n      });\n      alert(availabilityExists ? 'Availability updated successfully!' : 'Availability saved successfully!');\n      console.log('Saved/Updated Availability:', response);\n    } catch (error) {\n      console.error('Error saving/updating availability:', error);\n      alert('Failed to save/update availability. Please try again.');\n    }\n  };\n  const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"availability-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Set Your Availability\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [weekDates[0], \" to \", weekDates[6]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"availability-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Shifts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this), weekDates.map((date, index) => /*#__PURE__*/_jsxDEV(\"th\", {\n              children: [daysOfWeek[index], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 56\n              }, this), date]\n            }, date, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 33\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: ['Morning', 'Noon', 'Evening', 'Night'].map(shift => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: shift\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 33\n            }, this), weekDates.map(date => {\n              var _availability$date;\n              return /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: ((_availability$date = availability[date]) === null || _availability$date === void 0 ? void 0 : _availability$date[shift]) || false,\n                  onChange: e => handleAvailabilityChange(date, shift, e.target.checked)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 41\n                }, this)\n              }, date, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 37\n              }, this);\n            })]\n          }, shift, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        className: \"save-button\",\n        children: \"Save Availability\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(AvailabilityScreen, \"oQJdWR//q1TM0j9WuXQ7GFVdDeQ=\", false, function () {\n  return [useNavigate];\n});\n_c = AvailabilityScreen;\nexport default AvailabilityScreen;\nvar _c;\n$RefreshReg$(_c, \"AvailabilityScreen\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Navbar","getAvailabilityByUserId","saveAvailability","updateAvailability","calculateWeekDates","jsxDEV","_jsxDEV","Fragment","_Fragment","AvailabilityScreen","_s","_JSON$parse","_JSON$parse$user","availability","setAvailability","weekDates","setWeekDates","availabilityExists","setAvailabilityExists","navigate","userId","JSON","parse","localStorage","getItem","user","id","formattedDates","map","date","year","month","day","split","loadAvailability","data","error","console","handleAvailabilityChange","shift","isAvailable","prev","handleSave","response","alert","log","daysOfWeek","children","fileName","_jsxFileName","lineNumber","columnNumber","className","index","_availability$date","type","checked","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["/Users/dorlevi/IdeaProjects/newShiftWise/client/src/components/AvailabilityScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport {\n    getAvailabilityByUserId,\n    saveAvailability,\n    updateAvailability,\n    calculateWeekDates,\n} from '../services/availabilityService';\nimport '../styles/AvailabilityScreen.css';\n\nconst AvailabilityScreen = () => {\n    const [availability, setAvailability] = useState({});\n    const [weekDates, setWeekDates] = useState([]);\n    const [availabilityExists, setAvailabilityExists] = useState(false); // האם זמינות קיימת\n    const navigate = useNavigate();\n    const userId = JSON.parse(localStorage.getItem('user'))?.user?.id; // קבלת ה-userId מה-localStorage\n\n    useEffect(() => {\n        if (!userId) {\n            navigate('/'); // אם המשתמש לא מחובר, ננווט למסך ההתחברות\n            return;\n        }\n\n        // חישוב תאריכי השבוע\n        const formattedDates = calculateWeekDates().map((date) => {\n            const [year, month, day] = date.split('-');\n            return `${day}/${month}/${year}`; // שינוי לפורמט dd/mm/yyyy\n        });\n        setWeekDates(formattedDates);\n\n        // טעינת זמינות מהשרת\n        const loadAvailability = async () => {\n            try {\n                const data = await getAvailabilityByUserId(userId);\n                if (data) {\n                    setAvailability(data);\n                    setAvailabilityExists(true);\n                }\n            } catch (error) {\n                console.error('Error fetching availability:', error);\n            }\n        };\n\n        loadAvailability();\n    }, [navigate, userId]);\n\n    const handleAvailabilityChange = (date, shift, isAvailable) => {\n        setAvailability((prev) => ({\n            ...prev,\n            [date]: {\n                ...prev[date],\n                [shift]: isAvailable,\n            },\n        }));\n    };\n\n    const handleSave = async () => {\n        try {\n            const response = availabilityExists\n                ? await updateAvailability(userId, { weekDates, availability })\n                : await saveAvailability(userId, { weekDates, availability });\n\n            alert(availabilityExists ? 'Availability updated successfully!' : 'Availability saved successfully!');\n            console.log('Saved/Updated Availability:', response);\n        } catch (error) {\n            console.error('Error saving/updating availability:', error);\n            alert('Failed to save/update availability. Please try again.');\n        }\n    };\n\n    const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\n    return (\n        <>\n            <Navbar />\n            <div className=\"availability-container\">\n                <h2>Set Your Availability</h2>\n                <p>{weekDates[0]} to {weekDates[6]}</p>\n                <table className=\"availability-table\">\n                    <thead>\n                        <tr>\n                            <th>Shifts</th>\n                            {weekDates.map((date, index) => (\n                                <th key={date}>\n                                    {daysOfWeek[index]}<br />\n                                    {date}\n                                </th>\n                            ))}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {['Morning', 'Noon', 'Evening', 'Night'].map((shift) => (\n                            <tr key={shift}>\n                                <td>{shift}</td>\n                                {weekDates.map((date) => (\n                                    <td key={date}>\n                                        <input\n                                            type=\"checkbox\"\n                                            checked={availability[date]?.[shift] || false}\n                                            onChange={(e) =>\n                                                handleAvailabilityChange(date, shift, e.target.checked)\n                                            }\n                                        />\n                                    </td>\n                                ))}\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n                <button onClick={handleSave} className=\"save-button\">Save Availability</button>\n            </div>\n        </>\n    );\n};\n\nexport default AvailabilityScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}