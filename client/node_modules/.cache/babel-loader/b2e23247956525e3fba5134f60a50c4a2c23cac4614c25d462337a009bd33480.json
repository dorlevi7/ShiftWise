{"ast":null,"code":"// Import toast notifications\nimport { toast } from 'react-toastify';\n\n// Import user and company service functions\nimport { getUsers, updateUserCompanies, addUser } from '../services/userService';\nimport { removeUserFromCompany, addEmployeeToCompany } from '../services/companyService';\nimport { removeCompanyFromUser } from '../services/userService';\n\n// Import JSON file of employee data\nimport employeesData from '../data/emps.json';\n\n// Import utility functions for employee handling\nimport { getPhotoDataUrl, findExistingUser, associateUserWithCompany, createAndAddNewEmployee, resetNewEmployeeForm } from '../utils/employeeUtils';\nimport { isValidName, isValidEmail, isValidPhone, isStrongPassword } from '../utils/validationUtils';\n\n// Fetch employees belonging to a specific company\nexport const fetchEmployees = async (companyId, setEmployees, setError, setIsLoading) => {\n  try {\n    const data = await getUsers();\n    const usersWithIds = data ? Object.entries(data).map(([id, user]) => ({\n      id,\n      ...user\n    })) : [];\n    const filtered = usersWithIds.filter(user => {\n      var _user$companyIds;\n      return (_user$companyIds = user.companyIds) === null || _user$companyIds === void 0 ? void 0 : _user$companyIds.some(company => company.companyId === companyId);\n    });\n    setEmployees(filtered);\n  } catch (err) {\n    setError('Failed to fetch employees.');\n  } finally {\n    setIsLoading(false);\n  }\n};\n\n// Load new employees from a JSON file and add them to the company\nexport const handleLoadEmployeesFromJSON = async (loggedUser, setEmployees, setIsProcessing) => {\n  try {\n    if (!loggedUser || !loggedUser.company) {\n      toast.error('No company information found. Please try again.');\n      return;\n    }\n    setIsProcessing(true);\n    const companyId = loggedUser.company.id;\n    const allUsers = await getUsers();\n\n    // Filter out employees who are already in the company\n    const newEmployees = employeesData.filter(employee => {\n      var _existingUser$company;\n      const existingUser = Object.values(allUsers).find(user => user.email === employee.email);\n      if (!existingUser) {\n        return true;\n      }\n      const isInCompany = (_existingUser$company = existingUser.companyIds) === null || _existingUser$company === void 0 ? void 0 : _existingUser$company.some(company => company.companyId === companyId);\n      return !isInCompany;\n    });\n\n    // Add new or associate existing users\n    for (const employee of newEmployees) {\n      const existingUser = Object.values(allUsers).find(user => user.email === employee.email);\n      if (existingUser) {\n        await updateUserCompanies(existingUser, loggedUser.company);\n        await addEmployeeToCompany(companyId, existingUser.id);\n      } else {\n        const addedEmployee = await addUser(employee);\n        await updateUserCompanies(addedEmployee, loggedUser.company);\n        await addEmployeeToCompany(companyId, addedEmployee.id);\n      }\n    }\n\n    // Refresh employees list after addition\n    const updatedUsers = await getUsers();\n    const usersWithIds = Object.entries(updatedUsers).map(([id, user]) => ({\n      id,\n      ...user\n    }));\n    const filteredEmployees = usersWithIds.filter(user => {\n      var _user$companyIds2;\n      return (_user$companyIds2 = user.companyIds) === null || _user$companyIds2 === void 0 ? void 0 : _user$companyIds2.some(company => company.companyId === companyId);\n    });\n    setEmployees(filteredEmployees);\n    toast.success(`${newEmployees.length} employees added successfully!`);\n  } catch (error) {\n    toast.error('Failed to load employees from JSON.');\n    console.error(error);\n  } finally {\n    setIsProcessing(false);\n  }\n};\n\n// Delete a specific employee from the company\nexport const handleDeleteConfirmed = async (employeeToDelete, loggedUser, employees, setEmployees, closeConfirmDeleteModal) => {\n  if (!employeeToDelete) return;\n  try {\n    var _loggedUser$company;\n    const companyId = loggedUser === null || loggedUser === void 0 ? void 0 : (_loggedUser$company = loggedUser.company) === null || _loggedUser$company === void 0 ? void 0 : _loggedUser$company.id;\n    if (!companyId) {\n      toast.error('No company information found. Please try again.');\n      return;\n    }\n    await removeCompanyFromUser(employeeToDelete.id, companyId);\n    await removeUserFromCompany(companyId, employeeToDelete.id);\n    setEmployees(employees.filter(employee => employee.id !== employeeToDelete.id));\n    toast.success('Employee deleted successfully!');\n  } catch (err) {\n    toast.error('Failed to delete employee.');\n    console.error(err);\n  } finally {\n    closeConfirmDeleteModal();\n  }\n};\n\n// Add a new employee manually via the form\nexport const handleAddEmployee = async (e, newEmployee, loggedUser, employees, setEmployees, setNewEmployee, setIsAddEmployeeModalOpen) => {\n  e.preventDefault();\n  try {\n    // Validation before proceeding\n    if (!isValidName(newEmployee.name)) return toast.error('Invalid name.');\n    if (!isValidEmail(newEmployee.email)) return toast.error('Invalid email.');\n    if (!isValidPhone(newEmployee.phone)) return toast.error('Invalid phone number.');\n    if (!isStrongPassword(newEmployee.password)) return toast.error('Weak password. Must be at least 8 characters and include uppercase, lowercase, and a number.');\n    const company = loggedUser === null || loggedUser === void 0 ? void 0 : loggedUser.company;\n    if (!company) return toast.error('No company information found.');\n    const photoDataUrl = await getPhotoDataUrl(newEmployee.photoFile);\n    const existingUser = await findExistingUser(newEmployee.email);\n    if (existingUser) {\n      await associateUserWithCompany(existingUser, company, employees, setEmployees);\n    } else {\n      await createAndAddNewEmployee(newEmployee, photoDataUrl, company, setEmployees);\n    }\n    resetNewEmployeeForm(setNewEmployee);\n    setIsAddEmployeeModalOpen(false);\n  } catch (err) {\n    toast.error('Failed to add employee.');\n    console.error(err);\n  }\n};\n\n// Delete all non-admin employees from the company\nexport const handleDeleteAllEmployees = async (loggedUser, employees, setEmployees, setIsProcessing) => {\n  try {\n    if (!loggedUser || !loggedUser.company) {\n      toast.error('No company information found. Please try again.');\n      return;\n    }\n    setIsProcessing(true);\n    const companyId = loggedUser.company.id;\n    const employeesToDelete = employees.filter(employee => employee.role !== 'admin');\n    if (employeesToDelete.length === 0) {\n      toast.info('No employees to delete.');\n      return;\n    }\n    for (const employee of employeesToDelete) {\n      await removeCompanyFromUser(employee.id, companyId);\n      await removeUserFromCompany(companyId, employee.id);\n    }\n    setEmployees(employees.filter(employee => employee.role === 'admin'));\n    toast.success(`${employeesToDelete.length} employees deleted successfully!`);\n  } catch (err) {\n    toast.error('Failed to delete employees.');\n    console.error(err);\n  } finally {\n    setIsProcessing(false);\n  }\n};","map":{"version":3,"names":["toast","getUsers","updateUserCompanies","addUser","removeUserFromCompany","addEmployeeToCompany","removeCompanyFromUser","employeesData","getPhotoDataUrl","findExistingUser","associateUserWithCompany","createAndAddNewEmployee","resetNewEmployeeForm","isValidName","isValidEmail","isValidPhone","isStrongPassword","fetchEmployees","companyId","setEmployees","setError","setIsLoading","data","usersWithIds","Object","entries","map","id","user","filtered","filter","_user$companyIds","companyIds","some","company","err","handleLoadEmployeesFromJSON","loggedUser","setIsProcessing","error","allUsers","newEmployees","employee","_existingUser$company","existingUser","values","find","email","isInCompany","addedEmployee","updatedUsers","filteredEmployees","_user$companyIds2","success","length","console","handleDeleteConfirmed","employeeToDelete","employees","closeConfirmDeleteModal","_loggedUser$company","handleAddEmployee","e","newEmployee","setNewEmployee","setIsAddEmployeeModalOpen","preventDefault","name","phone","password","photoDataUrl","photoFile","handleDeleteAllEmployees","employeesToDelete","role","info"],"sources":["/Users/dorlevi/IdeaProjects/newShiftWise/client/src/utils/employeeHandlers.js"],"sourcesContent":["// Import toast notifications\nimport { toast } from 'react-toastify';\n\n// Import user and company service functions\nimport { getUsers, updateUserCompanies, addUser } from '../services/userService';\nimport { removeUserFromCompany, addEmployeeToCompany } from '../services/companyService';\nimport { removeCompanyFromUser } from '../services/userService';\n\n// Import JSON file of employee data\nimport employeesData from '../data/emps.json';\n\n// Import utility functions for employee handling\nimport { getPhotoDataUrl, findExistingUser, associateUserWithCompany, createAndAddNewEmployee, resetNewEmployeeForm } from '../utils/employeeUtils';\n\nimport { isValidName, isValidEmail, isValidPhone, isStrongPassword } from '../utils/validationUtils';\n\n// Fetch employees belonging to a specific company\nexport const fetchEmployees = async (companyId, setEmployees, setError, setIsLoading) => {\n    try {\n        const data = await getUsers();\n        const usersWithIds = data ? Object.entries(data).map(([id, user]) => ({ id, ...user })) : [];\n\n        const filtered = usersWithIds.filter((user) =>\n            user.companyIds?.some((company) => company.companyId === companyId)\n        );\n\n        setEmployees(filtered);\n    } catch (err) {\n        setError('Failed to fetch employees.');\n    } finally {\n        setIsLoading(false);\n    }\n};\n\n// Load new employees from a JSON file and add them to the company\nexport const handleLoadEmployeesFromJSON = async (loggedUser, setEmployees, setIsProcessing) => {\n    try {\n        if (!loggedUser || !loggedUser.company) {\n            toast.error('No company information found. Please try again.');\n            return;\n        }\n\n        setIsProcessing(true);\n\n        const companyId = loggedUser.company.id;\n        const allUsers = await getUsers();\n\n        // Filter out employees who are already in the company\n        const newEmployees = employeesData.filter((employee) => {\n            const existingUser = Object.values(allUsers).find((user) => user.email === employee.email);\n\n            if (!existingUser) {\n                return true;\n            }\n\n            const isInCompany = existingUser.companyIds?.some((company) => company.companyId === companyId);\n            return !isInCompany;\n        });\n\n        // Add new or associate existing users\n        for (const employee of newEmployees) {\n            const existingUser = Object.values(allUsers).find((user) => user.email === employee.email);\n\n            if (existingUser) {\n                await updateUserCompanies(existingUser, loggedUser.company);\n                await addEmployeeToCompany(companyId, existingUser.id);\n            } else {\n                const addedEmployee = await addUser(employee);\n                await updateUserCompanies(addedEmployee, loggedUser.company);\n                await addEmployeeToCompany(companyId, addedEmployee.id);\n            }\n        }\n\n        // Refresh employees list after addition\n        const updatedUsers = await getUsers();\n        const usersWithIds = Object.entries(updatedUsers).map(([id, user]) => ({ id, ...user }));\n        const filteredEmployees = usersWithIds.filter((user) =>\n            user.companyIds?.some((company) => company.companyId === companyId)\n        );\n\n        setEmployees(filteredEmployees);\n        toast.success(`${newEmployees.length} employees added successfully!`);\n    } catch (error) {\n        toast.error('Failed to load employees from JSON.');\n        console.error(error);\n    } finally {\n        setIsProcessing(false);\n    }\n};\n\n// Delete a specific employee from the company\nexport const handleDeleteConfirmed = async (employeeToDelete, loggedUser, employees, setEmployees, closeConfirmDeleteModal) => {\n    if (!employeeToDelete) return;\n    try {\n        const companyId = loggedUser?.company?.id;\n        if (!companyId) {\n            toast.error('No company information found. Please try again.');\n            return;\n        }\n        await removeCompanyFromUser(employeeToDelete.id, companyId);\n        await removeUserFromCompany(companyId, employeeToDelete.id);\n        setEmployees(employees.filter((employee) => employee.id !== employeeToDelete.id));\n        toast.success('Employee deleted successfully!');\n    } catch (err) {\n        toast.error('Failed to delete employee.');\n        console.error(err);\n    } finally {\n        closeConfirmDeleteModal();\n    }\n};\n\n// Add a new employee manually via the form\nexport const handleAddEmployee = async (e, newEmployee, loggedUser, employees, setEmployees, setNewEmployee, setIsAddEmployeeModalOpen) => {\n    e.preventDefault();\n    try {\n\n        // Validation before proceeding\n        if (!isValidName(newEmployee.name)) return toast.error('Invalid name.');\n        if (!isValidEmail(newEmployee.email)) return toast.error('Invalid email.');\n        if (!isValidPhone(newEmployee.phone)) return toast.error('Invalid phone number.');\n        if (!isStrongPassword(newEmployee.password)) return toast.error('Weak password. Must be at least 8 characters and include uppercase, lowercase, and a number.');\n\n        const company = loggedUser?.company;\n        if (!company) return toast.error('No company information found.');\n\n        const photoDataUrl = await getPhotoDataUrl(newEmployee.photoFile);\n        const existingUser = await findExistingUser(newEmployee.email);\n\n        if (existingUser) {\n            await associateUserWithCompany(existingUser, company, employees, setEmployees);\n        } else {\n            await createAndAddNewEmployee(newEmployee, photoDataUrl, company, setEmployees);\n        }\n\n        resetNewEmployeeForm(setNewEmployee);\n        setIsAddEmployeeModalOpen(false);\n    } catch (err) {\n        toast.error('Failed to add employee.');\n        console.error(err);\n    }\n};\n\n// Delete all non-admin employees from the company\nexport const handleDeleteAllEmployees = async (loggedUser, employees, setEmployees, setIsProcessing) => {\n    try {\n        if (!loggedUser || !loggedUser.company) {\n            toast.error('No company information found. Please try again.');\n            return;\n        }\n\n        setIsProcessing(true);\n\n        const companyId = loggedUser.company.id;\n        const employeesToDelete = employees.filter(employee => employee.role !== 'admin');\n\n        if (employeesToDelete.length === 0) {\n            toast.info('No employees to delete.');\n            return;\n        }\n\n        for (const employee of employeesToDelete) {\n            await removeCompanyFromUser(employee.id, companyId);\n            await removeUserFromCompany(companyId, employee.id);\n        }\n\n        setEmployees(employees.filter(employee => employee.role === 'admin'));\n        toast.success(`${employeesToDelete.length} employees deleted successfully!`);\n    } catch (err) {\n        toast.error('Failed to delete employees.');\n        console.error(err);\n    } finally {\n        setIsProcessing(false);\n    }\n};"],"mappings":"AAAA;AACA,SAASA,KAAK,QAAQ,gBAAgB;;AAEtC;AACA,SAASC,QAAQ,EAAEC,mBAAmB,EAAEC,OAAO,QAAQ,yBAAyB;AAChF,SAASC,qBAAqB,EAAEC,oBAAoB,QAAQ,4BAA4B;AACxF,SAASC,qBAAqB,QAAQ,yBAAyB;;AAE/D;AACA,OAAOC,aAAa,MAAM,mBAAmB;;AAE7C;AACA,SAASC,eAAe,EAAEC,gBAAgB,EAAEC,wBAAwB,EAAEC,uBAAuB,EAAEC,oBAAoB,QAAQ,wBAAwB;AAEnJ,SAASC,WAAW,EAAEC,YAAY,EAAEC,YAAY,EAAEC,gBAAgB,QAAQ,0BAA0B;;AAEpG;AACA,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAOC,SAAS,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,YAAY,KAAK;EACrF,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMrB,QAAQ,CAAC,CAAC;IAC7B,MAAMsB,YAAY,GAAGD,IAAI,GAAGE,MAAM,CAACC,OAAO,CAACH,IAAI,CAAC,CAACI,GAAG,CAAC,CAAC,CAACC,EAAE,EAAEC,IAAI,CAAC,MAAM;MAAED,EAAE;MAAE,GAAGC;IAAK,CAAC,CAAC,CAAC,GAAG,EAAE;IAE5F,MAAMC,QAAQ,GAAGN,YAAY,CAACO,MAAM,CAAEF,IAAI;MAAA,IAAAG,gBAAA;MAAA,QAAAA,gBAAA,GACtCH,IAAI,CAACI,UAAU,cAAAD,gBAAA,uBAAfA,gBAAA,CAAiBE,IAAI,CAAEC,OAAO,IAAKA,OAAO,CAAChB,SAAS,KAAKA,SAAS,CAAC;IAAA,CACvE,CAAC;IAEDC,YAAY,CAACU,QAAQ,CAAC;EAC1B,CAAC,CAAC,OAAOM,GAAG,EAAE;IACVf,QAAQ,CAAC,4BAA4B,CAAC;EAC1C,CAAC,SAAS;IACNC,YAAY,CAAC,KAAK,CAAC;EACvB;AACJ,CAAC;;AAED;AACA,OAAO,MAAMe,2BAA2B,GAAG,MAAAA,CAAOC,UAAU,EAAElB,YAAY,EAAEmB,eAAe,KAAK;EAC5F,IAAI;IACA,IAAI,CAACD,UAAU,IAAI,CAACA,UAAU,CAACH,OAAO,EAAE;MACpClC,KAAK,CAACuC,KAAK,CAAC,iDAAiD,CAAC;MAC9D;IACJ;IAEAD,eAAe,CAAC,IAAI,CAAC;IAErB,MAAMpB,SAAS,GAAGmB,UAAU,CAACH,OAAO,CAACP,EAAE;IACvC,MAAMa,QAAQ,GAAG,MAAMvC,QAAQ,CAAC,CAAC;;IAEjC;IACA,MAAMwC,YAAY,GAAGlC,aAAa,CAACuB,MAAM,CAAEY,QAAQ,IAAK;MAAA,IAAAC,qBAAA;MACpD,MAAMC,YAAY,GAAGpB,MAAM,CAACqB,MAAM,CAACL,QAAQ,CAAC,CAACM,IAAI,CAAElB,IAAI,IAAKA,IAAI,CAACmB,KAAK,KAAKL,QAAQ,CAACK,KAAK,CAAC;MAE1F,IAAI,CAACH,YAAY,EAAE;QACf,OAAO,IAAI;MACf;MAEA,MAAMI,WAAW,IAAAL,qBAAA,GAAGC,YAAY,CAACZ,UAAU,cAAAW,qBAAA,uBAAvBA,qBAAA,CAAyBV,IAAI,CAAEC,OAAO,IAAKA,OAAO,CAAChB,SAAS,KAAKA,SAAS,CAAC;MAC/F,OAAO,CAAC8B,WAAW;IACvB,CAAC,CAAC;;IAEF;IACA,KAAK,MAAMN,QAAQ,IAAID,YAAY,EAAE;MACjC,MAAMG,YAAY,GAAGpB,MAAM,CAACqB,MAAM,CAACL,QAAQ,CAAC,CAACM,IAAI,CAAElB,IAAI,IAAKA,IAAI,CAACmB,KAAK,KAAKL,QAAQ,CAACK,KAAK,CAAC;MAE1F,IAAIH,YAAY,EAAE;QACd,MAAM1C,mBAAmB,CAAC0C,YAAY,EAAEP,UAAU,CAACH,OAAO,CAAC;QAC3D,MAAM7B,oBAAoB,CAACa,SAAS,EAAE0B,YAAY,CAACjB,EAAE,CAAC;MAC1D,CAAC,MAAM;QACH,MAAMsB,aAAa,GAAG,MAAM9C,OAAO,CAACuC,QAAQ,CAAC;QAC7C,MAAMxC,mBAAmB,CAAC+C,aAAa,EAAEZ,UAAU,CAACH,OAAO,CAAC;QAC5D,MAAM7B,oBAAoB,CAACa,SAAS,EAAE+B,aAAa,CAACtB,EAAE,CAAC;MAC3D;IACJ;;IAEA;IACA,MAAMuB,YAAY,GAAG,MAAMjD,QAAQ,CAAC,CAAC;IACrC,MAAMsB,YAAY,GAAGC,MAAM,CAACC,OAAO,CAACyB,YAAY,CAAC,CAACxB,GAAG,CAAC,CAAC,CAACC,EAAE,EAAEC,IAAI,CAAC,MAAM;MAAED,EAAE;MAAE,GAAGC;IAAK,CAAC,CAAC,CAAC;IACxF,MAAMuB,iBAAiB,GAAG5B,YAAY,CAACO,MAAM,CAAEF,IAAI;MAAA,IAAAwB,iBAAA;MAAA,QAAAA,iBAAA,GAC/CxB,IAAI,CAACI,UAAU,cAAAoB,iBAAA,uBAAfA,iBAAA,CAAiBnB,IAAI,CAAEC,OAAO,IAAKA,OAAO,CAAChB,SAAS,KAAKA,SAAS,CAAC;IAAA,CACvE,CAAC;IAEDC,YAAY,CAACgC,iBAAiB,CAAC;IAC/BnD,KAAK,CAACqD,OAAO,CAAC,GAAGZ,YAAY,CAACa,MAAM,gCAAgC,CAAC;EACzE,CAAC,CAAC,OAAOf,KAAK,EAAE;IACZvC,KAAK,CAACuC,KAAK,CAAC,qCAAqC,CAAC;IAClDgB,OAAO,CAAChB,KAAK,CAACA,KAAK,CAAC;EACxB,CAAC,SAAS;IACND,eAAe,CAAC,KAAK,CAAC;EAC1B;AACJ,CAAC;;AAED;AACA,OAAO,MAAMkB,qBAAqB,GAAG,MAAAA,CAAOC,gBAAgB,EAAEpB,UAAU,EAAEqB,SAAS,EAAEvC,YAAY,EAAEwC,uBAAuB,KAAK;EAC3H,IAAI,CAACF,gBAAgB,EAAE;EACvB,IAAI;IAAA,IAAAG,mBAAA;IACA,MAAM1C,SAAS,GAAGmB,UAAU,aAAVA,UAAU,wBAAAuB,mBAAA,GAAVvB,UAAU,CAAEH,OAAO,cAAA0B,mBAAA,uBAAnBA,mBAAA,CAAqBjC,EAAE;IACzC,IAAI,CAACT,SAAS,EAAE;MACZlB,KAAK,CAACuC,KAAK,CAAC,iDAAiD,CAAC;MAC9D;IACJ;IACA,MAAMjC,qBAAqB,CAACmD,gBAAgB,CAAC9B,EAAE,EAAET,SAAS,CAAC;IAC3D,MAAMd,qBAAqB,CAACc,SAAS,EAAEuC,gBAAgB,CAAC9B,EAAE,CAAC;IAC3DR,YAAY,CAACuC,SAAS,CAAC5B,MAAM,CAAEY,QAAQ,IAAKA,QAAQ,CAACf,EAAE,KAAK8B,gBAAgB,CAAC9B,EAAE,CAAC,CAAC;IACjF3B,KAAK,CAACqD,OAAO,CAAC,gCAAgC,CAAC;EACnD,CAAC,CAAC,OAAOlB,GAAG,EAAE;IACVnC,KAAK,CAACuC,KAAK,CAAC,4BAA4B,CAAC;IACzCgB,OAAO,CAAChB,KAAK,CAACJ,GAAG,CAAC;EACtB,CAAC,SAAS;IACNwB,uBAAuB,CAAC,CAAC;EAC7B;AACJ,CAAC;;AAED;AACA,OAAO,MAAME,iBAAiB,GAAG,MAAAA,CAAOC,CAAC,EAAEC,WAAW,EAAE1B,UAAU,EAAEqB,SAAS,EAAEvC,YAAY,EAAE6C,cAAc,EAAEC,yBAAyB,KAAK;EACvIH,CAAC,CAACI,cAAc,CAAC,CAAC;EAClB,IAAI;IAEA;IACA,IAAI,CAACrD,WAAW,CAACkD,WAAW,CAACI,IAAI,CAAC,EAAE,OAAOnE,KAAK,CAACuC,KAAK,CAAC,eAAe,CAAC;IACvE,IAAI,CAACzB,YAAY,CAACiD,WAAW,CAAChB,KAAK,CAAC,EAAE,OAAO/C,KAAK,CAACuC,KAAK,CAAC,gBAAgB,CAAC;IAC1E,IAAI,CAACxB,YAAY,CAACgD,WAAW,CAACK,KAAK,CAAC,EAAE,OAAOpE,KAAK,CAACuC,KAAK,CAAC,uBAAuB,CAAC;IACjF,IAAI,CAACvB,gBAAgB,CAAC+C,WAAW,CAACM,QAAQ,CAAC,EAAE,OAAOrE,KAAK,CAACuC,KAAK,CAAC,8FAA8F,CAAC;IAE/J,MAAML,OAAO,GAAGG,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEH,OAAO;IACnC,IAAI,CAACA,OAAO,EAAE,OAAOlC,KAAK,CAACuC,KAAK,CAAC,+BAA+B,CAAC;IAEjE,MAAM+B,YAAY,GAAG,MAAM9D,eAAe,CAACuD,WAAW,CAACQ,SAAS,CAAC;IACjE,MAAM3B,YAAY,GAAG,MAAMnC,gBAAgB,CAACsD,WAAW,CAAChB,KAAK,CAAC;IAE9D,IAAIH,YAAY,EAAE;MACd,MAAMlC,wBAAwB,CAACkC,YAAY,EAAEV,OAAO,EAAEwB,SAAS,EAAEvC,YAAY,CAAC;IAClF,CAAC,MAAM;MACH,MAAMR,uBAAuB,CAACoD,WAAW,EAAEO,YAAY,EAAEpC,OAAO,EAAEf,YAAY,CAAC;IACnF;IAEAP,oBAAoB,CAACoD,cAAc,CAAC;IACpCC,yBAAyB,CAAC,KAAK,CAAC;EACpC,CAAC,CAAC,OAAO9B,GAAG,EAAE;IACVnC,KAAK,CAACuC,KAAK,CAAC,yBAAyB,CAAC;IACtCgB,OAAO,CAAChB,KAAK,CAACJ,GAAG,CAAC;EACtB;AACJ,CAAC;;AAED;AACA,OAAO,MAAMqC,wBAAwB,GAAG,MAAAA,CAAOnC,UAAU,EAAEqB,SAAS,EAAEvC,YAAY,EAAEmB,eAAe,KAAK;EACpG,IAAI;IACA,IAAI,CAACD,UAAU,IAAI,CAACA,UAAU,CAACH,OAAO,EAAE;MACpClC,KAAK,CAACuC,KAAK,CAAC,iDAAiD,CAAC;MAC9D;IACJ;IAEAD,eAAe,CAAC,IAAI,CAAC;IAErB,MAAMpB,SAAS,GAAGmB,UAAU,CAACH,OAAO,CAACP,EAAE;IACvC,MAAM8C,iBAAiB,GAAGf,SAAS,CAAC5B,MAAM,CAACY,QAAQ,IAAIA,QAAQ,CAACgC,IAAI,KAAK,OAAO,CAAC;IAEjF,IAAID,iBAAiB,CAACnB,MAAM,KAAK,CAAC,EAAE;MAChCtD,KAAK,CAAC2E,IAAI,CAAC,yBAAyB,CAAC;MACrC;IACJ;IAEA,KAAK,MAAMjC,QAAQ,IAAI+B,iBAAiB,EAAE;MACtC,MAAMnE,qBAAqB,CAACoC,QAAQ,CAACf,EAAE,EAAET,SAAS,CAAC;MACnD,MAAMd,qBAAqB,CAACc,SAAS,EAAEwB,QAAQ,CAACf,EAAE,CAAC;IACvD;IAEAR,YAAY,CAACuC,SAAS,CAAC5B,MAAM,CAACY,QAAQ,IAAIA,QAAQ,CAACgC,IAAI,KAAK,OAAO,CAAC,CAAC;IACrE1E,KAAK,CAACqD,OAAO,CAAC,GAAGoB,iBAAiB,CAACnB,MAAM,kCAAkC,CAAC;EAChF,CAAC,CAAC,OAAOnB,GAAG,EAAE;IACVnC,KAAK,CAACuC,KAAK,CAAC,6BAA6B,CAAC;IAC1CgB,OAAO,CAAChB,KAAK,CAACJ,GAAG,CAAC;EACtB,CAAC,SAAS;IACNG,eAAe,CAAC,KAAK,CAAC;EAC1B;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}